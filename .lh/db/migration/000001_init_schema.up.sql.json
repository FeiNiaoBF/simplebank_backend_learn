{
    "sourceFile": "db/migration/000001_init_schema.up.sql",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1711778515960,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1711778540058,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,48 +1,34 @@\n-CREATE TYPE Currency AS ENUM (\n-  'USD',\n-  'EUR',\n-  'CNY'\n-);\n-\n+CREATE TYPE Currency AS ENUM ('USD', 'EUR', 'CNY');\n CREATE TABLE accounts (\n   id bigserial PRIMARY KEY,\n   owner varchar NOT NULL,\n   balance bigint NOT NULL,\n   currency Currency NOT NULL,\n   created_at timestamptz NOT NULL DEFAULT (now())\n );\n-\n CREATE TABLE entries (\n   id bigserial PRIMARY KEY,\n   account_id bigint,\n   amount bigint NOT NULL,\n-  created_at timestampz DEFAULT (now())\n+  created_at timestamptz DEFAULT (now())\n );\n-\n CREATE TABLE transfers (\n   id bigserial PRIMARY KEY,\n   from_account_id bigint,\n   to_account_id bigint,\n   amount bigint NOT NULL,\n   created_at timestampz NOT NULL DEFAULT (now())\n );\n-\n CREATE INDEX ON accounts (owner);\n-\n CREATE INDEX ON entries (account_id);\n-\n CREATE INDEX ON transfers (from_account_id);\n-\n CREATE INDEX ON transfers (to_account_id);\n-\n CREATE INDEX ON transfers (from_account_id, to_account_id);\n-\n COMMENT ON COLUMN entries.amount IS 'can be negative and positive';\n-\n COMMENT ON COLUMN transfers.amount IS 'must be positive';\n-\n-ALTER TABLE entries ADD FOREIGN KEY (account_id) REFERENCES accounts (id);\n-\n-ALTER TABLE transfers ADD FOREIGN KEY (from_account_id) REFERENCES accounts (id);\n-\n-ALTER TABLE transfers ADD FOREIGN KEY (to_account_id) REFERENCES accounts (id);\n+ALTER TABLE entries\n+ADD FOREIGN KEY (account_id) REFERENCES accounts (id);\n+ALTER TABLE transfers\n+ADD FOREIGN KEY (from_account_id) REFERENCES accounts (id);\n+ALTER TABLE transfers\n+ADD FOREIGN KEY (to_account_id) REFERENCES accounts (id);\n"
                },
                {
                    "date": 1711778558395,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,16 +9,16 @@\n CREATE TABLE entries (\n   id bigserial PRIMARY KEY,\n   account_id bigint,\n   amount bigint NOT NULL,\n-  created_at timestamptz DEFAULT (now())\n+  created_at timestampz DEFAULT (now())\n );\n CREATE TABLE transfers (\n   id bigserial PRIMARY KEY,\n   from_account_id bigint,\n   to_account_id bigint,\n   amount bigint NOT NULL,\n-  created_at timestampz NOT NULL DEFAULT (now())\n+  created_at timestamptz NOT NULL DEFAULT (now())\n );\n CREATE INDEX ON accounts (owner);\n CREATE INDEX ON entries (account_id);\n CREATE INDEX ON transfers (from_account_id);\n"
                },
                {
                    "date": 1711778605889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,34 +1,42 @@\n-CREATE TYPE Currency AS ENUM ('USD', 'EUR', 'CNY');\n-CREATE TABLE accounts (\n-  id bigserial PRIMARY KEY,\n-  owner varchar NOT NULL,\n-  balance bigint NOT NULL,\n-  currency Currency NOT NULL,\n-  created_at timestamptz NOT NULL DEFAULT (now())\n+CREATE TABLE \"accounts\" (\n+  \"id\" bigserial PRIMARY KEY,\n+  \"owner\" varchar NOT NULL,\n+  \"balance\" bigint NOT NULL,\n+  \"currency\" varchar NOT NULL,\n+  \"created_at\" timestamptz NOT NULL DEFAULT (now())\n );\n-CREATE TABLE entries (\n-  id bigserial PRIMARY KEY,\n-  account_id bigint,\n-  amount bigint NOT NULL,\n-  created_at timestampz DEFAULT (now())\n+\n+CREATE TABLE \"entries\" (\n+  \"id\" bigserial PRIMARY KEY,\n+  \"account_id\" bigint NOT NULL,\n+  \"amount\" bigint NOT NULL,\n+  \"created_at\" timestamptz NOT NULL DEFAULT (now())\n );\n-CREATE TABLE transfers (\n-  id bigserial PRIMARY KEY,\n-  from_account_id bigint,\n-  to_account_id bigint,\n-  amount bigint NOT NULL,\n-  created_at timestamptz NOT NULL DEFAULT (now())\n+\n+CREATE TABLE \"transfers\" (\n+  \"id\" bigserial PRIMARY KEY,\n+  \"from_account_id\" bigint NOT NULL,\n+  \"to_account_id\" bigint NOT NULL,\n+  \"amount\" bigint NOT NULL,\n+  \"created_at\" timestamptz NOT NULL DEFAULT (now())\n );\n-CREATE INDEX ON accounts (owner);\n-CREATE INDEX ON entries (account_id);\n-CREATE INDEX ON transfers (from_account_id);\n-CREATE INDEX ON transfers (to_account_id);\n-CREATE INDEX ON transfers (from_account_id, to_account_id);\n-COMMENT ON COLUMN entries.amount IS 'can be negative and positive';\n-COMMENT ON COLUMN transfers.amount IS 'must be positive';\n-ALTER TABLE entries\n-ADD FOREIGN KEY (account_id) REFERENCES accounts (id);\n-ALTER TABLE transfers\n-ADD FOREIGN KEY (from_account_id) REFERENCES accounts (id);\n-ALTER TABLE transfers\n-ADD FOREIGN KEY (to_account_id) REFERENCES accounts (id);\n+\n+CREATE INDEX ON \"accounts\" (\"owner\");\n+\n+CREATE INDEX ON \"entries\" (\"account_id\");\n+\n+CREATE INDEX ON \"transfers\" (\"from_account_id\");\n+\n+CREATE INDEX ON \"transfers\" (\"to_account_id\");\n+\n+CREATE INDEX ON \"transfers\" (\"from_account_id\", \"to_account_id\");\n+\n+COMMENT ON COLUMN \"entries\".\"amount\" IS 'can be negative or positive';\n+\n+COMMENT ON COLUMN \"transfers\".\"amount\" IS 'must be positive';\n+\n+ALTER TABLE \"entries\" ADD FOREIGN KEY (\"account_id\") REFERENCES \"accounts\" (\"id\");\n+\n+ALTER TABLE \"transfers\" ADD FOREIGN KEY (\"from_account_id\") REFERENCES \"accounts\" (\"id\");\n+\n+ALTER TABLE \"transfers\" ADD FOREIGN KEY (\"to_account_id\") REFERENCES \"accounts\" (\"id\");\n"
                },
                {
                    "date": 1711778694933,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,10 +6,9 @@\n   \"created_at\" timestamptz NOT NULL DEFAULT (now())\n );\n \n CREATE TABLE \"entries\" (\n-  \"id\" bigserial PRIMARY KEY,\n-  \"account_id\" bigint NOT NULL,\n+  \"id\" bigserial PRIMARY KEY,  \"account_id\" bigint NOT NULL,\n   \"amount\" bigint NOT NULL,\n   \"created_at\" timestamptz NOT NULL DEFAULT (now())\n );\n \n"
                },
                {
                    "date": 1711778752566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,10 @@\n   \"created_at\" timestamptz NOT NULL DEFAULT (now())\n );\n \n CREATE TABLE \"entries\" (\n-  \"id\" bigserial PRIMARY KEY,  \"account_id\" bigint NOT NULL,\n+  \"id\" bigserial PRIMARY KEY,\n+  \"account_id\" bigint NOT NULL,\n   \"amount\" bigint NOT NULL,\n   \"created_at\" timestamptz NOT NULL DEFAULT (now())\n );\n \n@@ -19,8 +20,14 @@\n   \"amount\" bigint NOT NULL,\n   \"created_at\" timestamptz NOT NULL DEFAULT (now())\n );\n \n+ALTER TABLE \"entries\" ADD FOREIGN KEY (\"account_id\") REFERENCES \"accounts\" (\"id\");\n+\n+ALTER TABLE \"transfers\" ADD FOREIGN KEY (\"from_account_id\") REFERENCES \"accounts\" (\"id\");\n+\n+ALTER TABLE \"transfers\" ADD FOREIGN KEY (\"to_account_id\") REFERENCES \"accounts\" (\"id\");\n+\n CREATE INDEX ON \"accounts\" (\"owner\");\n \n CREATE INDEX ON \"entries\" (\"account_id\");\n \n@@ -32,10 +39,4 @@\n \n COMMENT ON COLUMN \"entries\".\"amount\" IS 'can be negative or positive';\n \n COMMENT ON COLUMN \"transfers\".\"amount\" IS 'must be positive';\n-\n-ALTER TABLE \"entries\" ADD FOREIGN KEY (\"account_id\") REFERENCES \"accounts\" (\"id\");\n-\n-ALTER TABLE \"transfers\" ADD FOREIGN KEY (\"from_account_id\") REFERENCES \"accounts\" (\"id\");\n-\n-ALTER TABLE \"transfers\" ADD FOREIGN KEY (\"to_account_id\") REFERENCES \"accounts\" (\"id\");\n"
                }
            ],
            "date": 1711778515960,
            "name": "Commit-0",
            "content": "CREATE TYPE Currency AS ENUM (\n  'USD',\n  'EUR',\n  'CNY'\n);\n\nCREATE TABLE accounts (\n  id bigserial PRIMARY KEY,\n  owner varchar NOT NULL,\n  balance bigint NOT NULL,\n  currency Currency NOT NULL,\n  created_at timestamptz NOT NULL DEFAULT (now())\n);\n\nCREATE TABLE entries (\n  id bigserial PRIMARY KEY,\n  account_id bigint,\n  amount bigint NOT NULL,\n  created_at timestampz DEFAULT (now())\n);\n\nCREATE TABLE transfers (\n  id bigserial PRIMARY KEY,\n  from_account_id bigint,\n  to_account_id bigint,\n  amount bigint NOT NULL,\n  created_at timestampz NOT NULL DEFAULT (now())\n);\n\nCREATE INDEX ON accounts (owner);\n\nCREATE INDEX ON entries (account_id);\n\nCREATE INDEX ON transfers (from_account_id);\n\nCREATE INDEX ON transfers (to_account_id);\n\nCREATE INDEX ON transfers (from_account_id, to_account_id);\n\nCOMMENT ON COLUMN entries.amount IS 'can be negative and positive';\n\nCOMMENT ON COLUMN transfers.amount IS 'must be positive';\n\nALTER TABLE entries ADD FOREIGN KEY (account_id) REFERENCES accounts (id);\n\nALTER TABLE transfers ADD FOREIGN KEY (from_account_id) REFERENCES accounts (id);\n\nALTER TABLE transfers ADD FOREIGN KEY (to_account_id) REFERENCES accounts (id);\n"
        }
    ]
}